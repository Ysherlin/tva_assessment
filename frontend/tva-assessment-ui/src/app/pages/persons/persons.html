<div class="persons-page">

  <h2>Persons</h2>

  <!-- Search Panel -->
  <div class="search-panel">
    <label>
      ID Number:
      <input type="text" [(ngModel)]="idNumber" />
    </label>

    <label>
      Surname:
      <input type="text" [(ngModel)]="surname" />
    </label>

    <button (click)="search()">Search</button>
  </div>

  <!-- Loading -->
  <div *ngIf="loading()" class="loading">
    Loading...
  </div>

  <!-- Results Table -->
  <table *ngIf="!loading() && results().length > 0">
    <thead>
      <tr>
        <th>ID Number</th>
        <th>Name</th>
        <th>Surname</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let p of results()" (click)="openDetails(p)" class="row-click">
        <td>{{ p.idNumber }}</td>
        <td>{{ p.name }}</td>
        <td>{{ p.surname }}</td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="!loading() && results().length === 0">
    No results found.
  </div>

  <!-- Paging -->
  <div class="paging" *ngIf="totalPages() > 1">

    <button 
      [disabled]="currentPage() === 1"
      (click)="loadPage(currentPage() - 1)">
      « Prev
    </button>

    <button 
      *ngFor="let p of pageRange()" 
      [class.active]="currentPage() === p"
      (click)="loadPage(p)">
      {{ p }}
    </button>

    <button
      [disabled]="currentPage() === totalPages()"
      (click)="loadPage(currentPage() + 1)">
      Next »
    </button>

  </div>

</div>
